# Discord bot
name: Mornin
on: 
  workflow_dispatch:
  # UTC expression is required
  # Here is JST 9:00 every Day
  schedule: 
    - cron: '0 0 * * *'
jobs:
  Notify:
    name: Mornin
    runs-on: ubuntu-latest
    steps: 
      - name: Check repository
        uses: actions/checkout@v2
      - name: Select a message
        id: select_message
        run: |
          message=$(gshuf -n 1 message.txt)
          echo "::set-output name=message::$message"
      - name: Notify
        run: |
          curl -H "Content-Type: application/json" \
          -X POST \
          -d '{
            "content": "${{ steps.select_message.outputs.message }}"
          }' \
          ${{ secrets.DISCORD_MORNIN}}